angular.module("angular-pd.templates",[]).run(["$templateCache",function(e){e.put("apd.html",'<div class=apd_root><select ng-model=data.selected.day ng-options="day for day in data.days" ng-init="data.selected.day = data.days[0]" ng-change=onDaySelectChanged(data.selected.day) id={{::apdDayId}} class="apd_elem apd_select_day apd_select {{::apdDayClasses}}"></select><span title={{getDayName(data.selected.dayOfWeek)}} ng-bind=getDayShortName(data.selected.dayOfWeek) class="apd_elem apd_day_of_week"></span><select ng-model=data.selected.month ng-options="(month + 1) for month in data.month" ng-init="data.selected.month = data.month[0]" ng-change=onMonthSelectChanged(data.selected.month) id={{::apdMonthId}} class="apd_elem apd_select_month apd_select {{::apdMonthClasses}}"></select><select ng-model=data.selected.year ng-options="year for year in data.years" ng-init="data.selected.year = data.years[0]" ng-change=onYearSelectChanged(data.selected.year) id={{::apdYearId}} class="apd_elem apd_select_year apd_select {{::apdYearClasses}}"></select></div>')}]);var apd;!function(e){var t;!function(t){"use strict";var a=function(){function a(s,n,r,i,o,d){if(this.yearsListDirection="desc",this.monthListDirection="asc",this.daysListDirection="asc",this.isValidNumber=function(e){var t=!isNaN(e),a=isFinite(e);return t&&a},this._getSelected=function(e,a,s){var n,r=e.datetime>a,i=e.datetime===a,o=e.datetime>s,d=e.datetime===s;return n=new t.DateModelClass(r||i||o||d?e.datetime:r?r?(new Date).getTime():s:a)},this._intArraySort=function(e,t){function a(e,t){return t-e}switch(void 0===t&&(t="asc"),t){default:return e.sort(function(e,t){return e-t});case"desc":return e.sort(a)}},this._getArrayOfNumbers=function(e,t){for(var a=[],s=e;t>=s;s++)a.push(s);return a},this.reloadYearsList=function(){return this instanceof a?(this.years=this._getYearsList(this._startDateTime,this._endDateTime,this._limitDates,this.yearsListDirection),this):(e.Model.MessagesFactoryClass.throwWrongInstanceMessage(),null)},this._getYearsList=function(t,s,n,r){if(!(this instanceof a))return e.Model.MessagesFactoryClass.throwWrongInstanceMessage(),null;var i=[],o=10,d=n.startDate.year,l=n.endDate.year,h=n.nowDate.year,c=new Date(this.selected.datetime).getFullYear(),u=c>h?c:h,g=h>c?c:h;return u+=o-1,g-=o-1,t&&s&&s>t?i=this._getArrayOfNumbers(d,l):t&&s&&t>s?(e.Model.MessagesFactoryClass.throwDatesInvertedMessage(),i=this._getArrayOfNumbers(l,d)):t&&s&&t===s?i=this._getArrayOfNumbers(d,l):t&&!s?i=this._getArrayOfNumbers(d,u):!t&&s?n.endDate.year>=n.nowDate.year?i=g-o>l-o?this._getArrayOfNumbers(g,l):this._getArrayOfNumbers(l-(o-1),l):n.endDate.year>n.nowDate.year&&(i=this._getArrayOfNumbers(l-(o-1),l)):t||s||(i=this._getArrayOfNumbers(g,u)),this._intArraySort(i,r)},this.reloadMonthList=function(){if(!(this instanceof a))return e.Model.MessagesFactoryClass.throwWrongInstanceMessage(),null;var t=new Date(this.selected.datetime).getFullYear();return this.month=this._getMonthList(this._startDateTime,this._endDateTime,this._limitDates,t,this.monthListDirection),this},this._getMonthList=function(t,s,n,r,i){if(!(this instanceof a))return e.Model.MessagesFactoryClass.throwWrongInstanceMessage(),null;var o,d=0,l=11;if(t||s){var h=t?n.startDate.year===r:!1,c=s?n.endDate.year===r:!1,u=t?n.startDate.month:d,g=s?n.endDate.month:l;o=h&&c?this._getArrayOfNumbers(u,g):h&&!c?this._getArrayOfNumbers(u,l):!h&&c?this._getArrayOfNumbers(d,g):this._getArrayOfNumbers(d,l)}else o=this._getArrayOfNumbers(d,l);return this._intArraySort(o,i)},this.reloadDaysList=function(){if(!(this instanceof a))return e.Model.MessagesFactoryClass.throwWrongInstanceMessage(),null;var t=new Date(this.selected.datetime).getFullYear(),s=new Date(this.selected.datetime).getMonth();return this.days=this._getDaysList(this._startDateTime,this._endDateTime,this._limitDates,t,s,this.daysListDirection),this},this._getDaysList=function(t,s,n,r,i,o){if(!(this instanceof a))return e.Model.MessagesFactoryClass.throwWrongInstanceMessage(),null;var d,l=1,h=a.getDaysInMonth(i,r);if(t||s){var c=t?n.startDate.year===r:!1,u=s?n.endDate.year===r:!1,g=t?n.startDate.month===i:!1,D=s?n.endDate.month===i:!1,m=c&&g,y=u&&D,f=t?n.startDate.day:l,M=s?n.endDate.day:h;d=m&&y?this._getArrayOfNumbers(f,M):m&&!y?this._getArrayOfNumbers(f,h):!m&&y?this._getArrayOfNumbers(l,M):this._getArrayOfNumbers(l,h)}else d=this._getArrayOfNumbers(l,h);return this._intArraySort(d,o)},this._getIntArr=function(t){return this instanceof a?t||0===t?t?this._getIntArr(t-1).concat(t):[]:(e.Model.MessagesFactoryClass.throwInvalidParamsMessage(),null):(e.Model.MessagesFactoryClass.throwWrongInstanceMessage(),null)},!(this instanceof a))return e.Model.MessagesFactoryClass.throwWrongClassCreationMessage(),new a(s,n,r,i,o,d);var l=this;s.datetime=l.isValidNumber(s.datetime)?s.datetime:null,n=l.isValidNumber(n)?n:null,r=l.isValidNumber(r)?r:null,l.selected=l._getSelected(s,n,r);var h=new Date(this.selected.datetime).getFullYear(),c=new Date(this.selected.datetime).getMonth();return l.yearsListDirection=i||l.yearsListDirection,l.monthListDirection=o||l.monthListDirection,l.daysListDirection=d||l.daysListDirection,l._limitDates=new t.LimitDatesClass(n,r),l._startDateTime=n,l._endDateTime=r,l.years=l._getYearsList(n,r,l._limitDates,l.yearsListDirection),l.month=l._getMonthList(n,r,l._limitDates,h,l.monthListDirection),l.days=l._getDaysList(n,r,l._limitDates,h,c,l.daysListDirection),this}return a.getDaysInMonth=function(e,t){return new Date(t,e+1,0).getDate()},a}();t.DataClass=a}(t=e.Model||(e.Model={}))}(apd||(apd={}));var apd;!function(e){var t;!function(t){"use strict";var a=function(){function t(a,s){return this instanceof t?(this.name=a,this["short"]=s,this):(e.Model.MessagesFactoryClass.throwWrongClassCreationMessage(),new t(a,s))}return t}();t.DayClass=a}(t=e.Model||(e.Model={}))}(apd||(apd={}));var apd;!function(e){var t;!function(t){"use strict";var a=function(){function t(a){var s=this;return this._setDefaultWeek=function(){return new t([new e.Model.DayClass("Sunday","Sun"),new e.Model.DayClass("Monday","Mon"),new e.Model.DayClass("Tuesday","Tue"),new e.Model.DayClass("Wednesday","Wed"),new e.Model.DayClass("Thursday","Thu"),new e.Model.DayClass("Friday","Fri"),new e.Model.DayClass("Saturday","Sat")])},this.getListOfShorts=function(){if(!(s instanceof t))return e.Model.MessagesFactoryClass.throwWrongInstanceMessage(),null;for(var a=[],n=0;n<s.list.length;n++){var r=s.list[n];a.push(r["short"])}return a},this.getListOfNames=function(){if(!(s instanceof t))return e.Model.MessagesFactoryClass.throwWrongInstanceMessage(),null;for(var a=[],n=0;n<s.list.length;n++){var r=s.list[n];a.push(r.name)}return a},this.getDayShortName=function(a){return s instanceof t?s.shorts[a]:(e.Model.MessagesFactoryClass.throwWrongInstanceMessage(),null)},this.getDayName=function(a){return s instanceof t?s.names[a]:(e.Model.MessagesFactoryClass.throwWrongInstanceMessage(),null)},this instanceof t?a?(this.list=a,this.shorts=this.getListOfShorts(),this.names=this.getListOfNames(),this):this._setDefaultWeek():(e.Model.MessagesFactoryClass.throwWrongClassCreationMessage(),new t(a))}return t}();t.WeekClass=a}(t=e.Model||(e.Model={}))}(apd||(apd={}));var apd;!function(e){var t;!function(t){"use strict";var a=function(){function t(a){if(!(this instanceof t))return e.Model.MessagesFactoryClass.throwWrongClassCreationMessage(),new t(a);var s=new Date(a);return this.day=s.getDate(),this.dayOfWeek=s.getDay(),this.month=s.getMonth(),this.year=s.getFullYear(),this.datetime=a,this.timezone=s.getTimezoneOffset(),this}return t.validate=function(e){return!(!e||!e.datetime)},t}();t.DateModelClass=a}(t=e.Model||(e.Model={}))}(apd||(apd={}));var apd;!function(e){var t;!function(t){"use strict";angular.module("angular-pd",["angular-pd.templates"]).directive("pureDatepicker",function(){return{restrict:"E",replace:!0,templateUrl:"apd.html",scope:{ngModel:"=",apdStart:"=?",apdEnd:"=?",apdDayId:"@?",apdMonthId:"@?",apdYearId:"@?",apdDayClasses:"@?",apdMonthClasses:"@?",apdYearClasses:"@?"},link:function(t){function a(t){var a,s=e.Model.DateModelClass.validate(t);a=s?t.datetime:(new Date).getTime();var r=new Date(a),i=r.getDate(),o=r.getMonth(),d=r.getFullYear(),l=n(i,o,d);return new e.Model.DateModelClass(l)}function s(a,s,n){t.data=new e.Model.DataClass(a,s,n),t.ngModel=t.data.selected}function n(t,a,s){d(t,a,s)||(t=e.Model.DataClass.getDaysInMonth(a,s));var n=o(t,a,s);return e.Model.LimitDatesClass.isDateBetweenLimits(n,l.startDateTime,l.endDateTime)||(e.Model.LimitDatesClass.isDateUpperStartLimit(n,l.startDateTime)?e.Model.LimitDatesClass.isDateLowerEndLimit(n,l.endDateTime)||(n=l.endDateTime):n=l.startDateTime),n}function r(a){h.stop(),t.data.selected=new e.Model.DateModelClass(a),t.ngModel=t.data.selected,h.start(i)}function i(e,a){if(e!==a){var s=new Date(e),i=s.getDate(),o=s.getMonth(),d=s.getFullYear();e=n(i,o,d),r(e),t.data.reloadYearsList(),t.data.reloadMonthList(),t.data.reloadDaysList()}}function o(t,a,s){return t&&(a||0===a)&&s||e.Model.MessagesFactoryClass.throwInvalidParamsMessage(),new Date(s,a,t).getTime()}function d(t,a,s){var n=e.Model.DataClass.getDaysInMonth(a,s);return n>=t}var l={initDateModel:null,startDateTime:null,endDateTime:null},h={handler:null,start:function(e){h.handler=t.$watch("ngModel.datetime",function(t,a){e&&e(t,a)},!0)},stop:function(){return h.handler?(h.handler(),!0):(e.Model.MessagesFactoryClass.throwInvalidParamsMessage(),!1)}};t.onDaySelectChanged=function(e){if(e){var a=n(t.data.selected.day,t.data.selected.month,t.data.selected.year);r(a)}},t.onMonthSelectChanged=function(e){if(e||0===e){var a,s=t.data.selected.year,i=t.data.selected.day;a=n(i,e,s),r(a),t.data.reloadDaysList()}},t.onYearSelectChanged=function(e){if(e||0===e){var a=t.data.selected.month,s=t.data.selected.day,i=n(s,a,e);r(i),t.data.reloadMonthList(),t.data.reloadDaysList()}},function(){l.startDateTime=t.apdStart?+t.apdStart:null,l.endDateTime=t.apdEnd?+t.apdEnd:null,l.initDateModel=a(t.ngModel),s(l.initDateModel,l.startDateTime,l.endDateTime);var n=new e.Model.WeekClass;t.getDayShortName=n.getDayShortName,t.getDayName=n.getDayName,h.start(i)}()}}})}(t=e.directive||(e.directive={}))}(apd||(apd={}));var apd;!function(e){var t;!function(t){"use strict";var a=function(){function t(a,s){return this._setStartDate=function(a){return this instanceof t?(this.startDate.day=new Date(a).getDate(),this.startDate.month=new Date(a).getMonth(),this.startDate.year=new Date(a).getFullYear(),this.startDate.datetime=a,this):(e.Model.MessagesFactoryClass.throwWrongInstanceMessage(),!1)},this._setEndDate=function(a){return this instanceof t?(this.endDate.day=new Date(a).getDate(),this.endDate.month=new Date(a).getMonth(),this.endDate.year=new Date(a).getFullYear(),this.endDate.datetime=a,this):(e.Model.MessagesFactoryClass.throwWrongInstanceMessage(),!1)},this._setNowDate=function(){return this instanceof t?(this.nowDate.day=(new Date).getDate(),this.nowDate.month=(new Date).getMonth(),this.nowDate.year=(new Date).getFullYear(),this.nowDate.datetime=(new Date).getTime(),this):(e.Model.MessagesFactoryClass.throwWrongInstanceMessage(),!1)},this instanceof t?(this.startDate={day:null,month:null,year:null,datetime:null},this.endDate={day:null,month:null,year:null,datetime:null},this.nowDate={day:null,month:null,year:null,datetime:null},this._setStartDate(a),this._setEndDate(s),void this._setNowDate()):(e.Model.MessagesFactoryClass.throwWrongClassCreationMessage(),new t(a,s))}return t.isDateUpperStartLimit=function(e,t){return t?e>t:!0},t.isDateLowerEndLimit=function(e,t){return t?t>e:!0},t.isDateBetweenLimits=function(e,t,a){return this.isDateUpperStartLimit(e,t)&&this.isDateLowerEndLimit(e,a)},t}();t.LimitDatesClass=a}(t=e.Model||(e.Model={}))}(apd||(apd={}));var apd;!function(e){var t;!function(e){"use strict";var t=function(){function e(){this.messages={wrongClassCreation:"Class created without 'new', wrong 'this'",wrongInstance:"Wrong 'this' instance",invalidParams:"Invalid params",invalidDateModel:"Invalid date model",datesInverted:"Warning! Start date > End date"}}return e.throwDeveloperError=function(e){console.error(e)},e.throwModelValidationMessage=function(t){return this instanceof e?void this.throwDeveloperError(this.messages.invalidDateModel+': error on field "'+t+'+"'):(console.error("Wrong 'this' instance"),!1)},e.throwInvalidParamsMessage=function(){return this instanceof e?void this.throwDeveloperError(this.messages.invalidParams):(console.error("Wrong 'this' instance"),!1)},e.throwWrongClassCreationMessage=function(){return this instanceof e?void this.throwDeveloperError(this.messages.wrongClassCreation):(console.error("Wrong 'this' instance"),!1)},e.throwWrongInstanceMessage=function(){return this instanceof e?void this.throwDeveloperError(this.messages.wrongInstance):(console.error("Wrong 'this' instance"),!1)},e.throwDatesInvertedMessage=function(){return this instanceof e?void this.throwDeveloperError(this.messages.datesInverted):(console.error("Wrong 'this' instance"),!1)},e}();e.MessagesFactoryClass=t}(t=e.Model||(e.Model={}))}(apd||(apd={}));
//# sourceMappingURL=angular-pure-datepicker.min.js.map