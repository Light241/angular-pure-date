angular.module("angular-pd.templates",[]).run(["$templateCache",function(e){e.put("apd.html",'<div class=apd_root><select ng-model=data.selected.day ng-options="day for day in data.days" ng-init="data.selected.day = data.days[0]" ng-change=onDaySelectChanged(data.selected.day) id={{::apdDayId}} class="apd_elem apd_select_day apd_select {{::apdDayClasses}}"></select><span title={{getDayOfWeekName(data.selected.dayOfWeek)}} ng-bind=getDayOfWeekShortName(data.selected.dayOfWeek) class="apd_elem apd_day_of_week"></span><select ng-model=data.selected.month ng-options="(month + 1) for month in data.month" ng-init="data.selected.month = data.month[0]" ng-change=onMonthSelectChanged(data.selected.month) id={{::apdMonthId}} class="apd_elem apd_select_month apd_select {{::apdMonthClasses}}"></select><select ng-model=data.selected.year ng-options="year for year in data.years" ng-init="data.selected.year = data.years[0]" ng-change=onYearSelectChanged(data.selected.year) id={{::apdYearId}} class="apd_elem apd_select_year apd_select {{::apdYearClasses}}"></select></div>')}]);var apd;!function(e){var t;!function(t){"use strict";var a=function(){function a(s,n,r){if(this.YEARS_LIST_DIRECTION="desc",this.MONTH_LIST_DIRECTION="asc",this.DAYS_LIST_DIRECTION="asc",this._getSelected=function(e,a,s){var n,r=e.datetime>a,i=e.datetime===a,d=e.datetime>s,o=e.datetime===s;return(r||i)&&(d||o)?n=new t.DateModelClass(e.datetime):r||(n=new t.DateModelClass(a)),n=new t.DateModelClass(r?(new Date).getTime():s)},this._intArraySort=function(e,t){function a(e,t){return t-e}switch(void 0===t&&(t="asc"),t){default:return e.sort(function(e,t){return e-t});case"desc":return e.sort(a)}},this._getArrayOfNumbers=function(e,t){for(var a=[],s=e;t>=s;s++)a.push(s);return a},this.reloadYearsList=function(){return this.years=this._getYearsList(this._startDateTime,this._endDateTime,this._limitDates,this.YEARS_LIST_DIRECTION),this},this._getYearsList=function(t,a,s,n){var r=[],i=20,d=s.startDate.year,o=s.endDate.year,l=s.nowDate.year;return t&&a&&a>t?r=this._getArrayOfNumbers(d,o):t&&a&&t>a?(e.Model.MessagesFactoryClass.throwDatesInvertedMessage(),r=this._getArrayOfNumbers(o,d)):t&&a&&t===a?r=this._getArrayOfNumbers(d,o):t&&!a?r=this._getArrayOfNumbers(d,l):!t&&a?r=this._getArrayOfNumbers(o,o):t||a||(r=this._getArrayOfNumbers(l-(i-1),l)),this._intArraySort(r,n)},this.reloadMonthList=function(){var e=new Date(this.selected.datetime).getFullYear();return this.month=this._getMonthList(this._startDateTime,this._endDateTime,this._limitDates,e,this.MONTH_LIST_DIRECTION),this},this._getMonthList=function(e,t,a,s,n){var r,i=0,d=11;if(e||t){var o=e?a.startDate.year===s:!1,l=t?a.endDate.year===s:!1,h=e?a.startDate.month:i,u=t?a.endDate.month:d;r=o&&l?this._getArrayOfNumbers(h,u):o&&!l?this._getArrayOfNumbers(h,d):!o&&l?this._getArrayOfNumbers(i,u):this._getArrayOfNumbers(i,d)}else r=this._getArrayOfNumbers(i,d);return this._intArraySort(r,n)},this.reloadDaysList=function(){var e=new Date(this.selected.datetime).getFullYear(),t=new Date(this.selected.datetime).getMonth();return this.days=this._getDaysList(this._startDateTime,this._endDateTime,this._limitDates,e,t,this.DAYS_LIST_DIRECTION),this},this._getDaysList=function(e,t,a,s,n,r){var i,d=1,o=this.getDaysInMonth(n,s);if(e||t){var l=e?a.startDate.year===s:!1,h=t?a.endDate.year===s:!1,u=e?a.startDate.month===n:!1,c=t?a.endDate.month===n:!1,D=l&&u,g=h&&c,m=e?a.startDate.day:d,f=t?a.endDate.day:o;i=D&&g?this._getArrayOfNumbers(m,f):D&&!g?this._getArrayOfNumbers(m,o):!D&&g?this._getArrayOfNumbers(d,f):this._getArrayOfNumbers(d,o)}else i=this._getArrayOfNumbers(d,o);return this._intArraySort(i,r)},this._getIntArr=function(t){return t||0===t?t?this._getIntArr(t-1).concat(t):[]:(e.Model.MessagesFactoryClass.throwInvalidParamsMessage(),null)},this.getDaysInMonth=function(e,t){return new Date(t,e+1,0).getDate()},!(this instanceof a))return e.Model.MessagesFactoryClass.throwWrongInstanceMessage(),new a(s,n,r);var i=this;i.selected=i._getSelected(s,n,r);var d=new Date(this.selected.datetime).getFullYear(),o=new Date(this.selected.datetime).getMonth();return i._limitDates=new t.LimitDatesClass(n,r),i._startDateTime=n,i._endDateTime=r,i.years=i._getYearsList(n,r,i._limitDates,this.YEARS_LIST_DIRECTION),i.month=i._getMonthList(n,r,i._limitDates,d,this.MONTH_LIST_DIRECTION),i.days=i._getDaysList(n,r,i._limitDates,d,o,this.DAYS_LIST_DIRECTION),this}return a.isDateUpperStartLimit=function(e,t){return t?e>t:!0},a.isDateLowerEndLimit=function(e,t){return t?t>e:!0},a.isDateBetweenLimits=function(e,t,a){return this.isDateUpperStartLimit(e,t)&&this.isDateLowerEndLimit(e,a)},a}();t.DataClass=a}(t=e.Model||(e.Model={}))}(apd||(apd={}));var apd;!function(e){var t;!function(t){"use strict";var a=function(){function t(a,s){return this instanceof t?(this.name=a,this["short"]=s,this):(e.Model.MessagesFactoryClass.throwWrongInstanceMessage(),new t(a,s))}return t}();t.DayOfWeek=a}(t=e.Model||(e.Model={}))}(apd||(apd={}));var apd;!function(e){var t;!function(t){"use strict";var a=function(){function t(a){var s=this;return this.getListOfShorts=function(){for(var e=[],t=0;t<s.list.length;t++){var a=s.list[t];e.push(a["short"])}return e},this.getListOfNames=function(){for(var e=[],t=0;t<s.list.length;t++){var a=s.list[t];e.push(a.name)}return e},this.getDayOfWeekShortName=function(e){return s.shorts[e]},this.getDayOfWeekName=function(e){return s.names[e]},this instanceof t?(this.list=a,this.shorts=this.getListOfShorts(),this.names=this.getListOfNames(),this):(e.Model.MessagesFactoryClass.throwWrongInstanceMessage(),new t(a))}return t}();t.DaysOfWeek=a}(t=e.Model||(e.Model={}))}(apd||(apd={}));var apd;!function(e){var t;!function(t){"use strict";var a=function(){function t(a){if(!(this instanceof t))return e.Model.MessagesFactoryClass.throwWrongInstanceMessage(),new t(a);var s=new Date(a);return this.day=s.getDate(),this.dayOfWeek=s.getDay(),this.month=s.getMonth(),this.year=s.getFullYear(),this.datetime=a,this.timezone=s.getTimezoneOffset(),this}return t.validate=function(e){return!(!e||!e.datetime)},t}();t.DateModelClass=a}(t=e.Model||(e.Model={}))}(apd||(apd={}));var apd;!function(e){var t;!function(e){"use strict";var t=function(){function e(){this.messages={wrongInstance:"Class created without 'new', wrong 'this'",invalidParams:"Invalid params",invalidDateModel:"Invalid date model",datesInverted:"Warning! Start date > End date"}}return e.throwDeveloperError=function(e){console.error(e)},e.throwModelValidationMessage=function(e){this.throwDeveloperError(this.messages.invalidDateModel+': error on field "'+e+'+"')},e.throwInvalidParamsMessage=function(){this.throwDeveloperError(this.messages.invalidParams)},e.throwWrongInstanceMessage=function(){this.throwDeveloperError(this.messages.wrongInstance)},e.throwDatesInvertedMessage=function(){this.throwDeveloperError(this.messages.datesInverted)},e}();e.MessagesFactoryClass=t}(t=e.Model||(e.Model={}))}(apd||(apd={}));var apd;!function(e){var t;!function(t){"use strict";angular.module("angular-pd.messages",[]).factory("MessagesFactory",function(){return new e.Model.MessagesFactoryClass})}(t=e.messages||(e.messages={}))}(apd||(apd={}));var apd;!function(e){var t;!function(t){"use strict";var a=new e.Model.DaysOfWeek([new e.Model.DayOfWeek("Sunday","Sun"),new e.Model.DayOfWeek("Monday","Mon"),new e.Model.DayOfWeek("Tuesday","Tue"),new e.Model.DayOfWeek("Wednesday","Wed"),new e.Model.DayOfWeek("Thursday","Thu"),new e.Model.DayOfWeek("Friday","Fri"),new e.Model.DayOfWeek("Saturday","Sat")]);angular.module("angular-pd",["angular-pd.templates","angular-pd.messages"]).directive("pureDatepicker",["MessagesFactory",function(t){return{restrict:"E",replace:!0,templateUrl:"apd.html",scope:{ngModel:"=",apdStart:"=?",apdEnd:"=?",apdDayId:"@?",apdMonthId:"@?",apdYearId:"@?",apdDayClasses:"@?",apdMonthClasses:"@?",apdYearClasses:"@?"},link:function(s){function n(t){var a,s=e.Model.DateModelClass.validate(t);return a=s?t.datetime:(new Date).getTime(),new e.Model.DateModelClass(a)}function r(t,a,n){s.data=new e.Model.DataClass(t,a,n),s.ngModel=s.data.selected}function i(t){u.stop(),s.data.selected=new e.Model.DateModelClass(t),s.ngModel=s.data.selected,u.start(d)}function d(e,t){e!==t&&(i(e),s.data.reloadYearsList(),s.data.reloadMonthList(),s.data.reloadDaysList())}function o(e,a,s){return e&&(a||0===a)&&s||t.throwInvalidParamsMessage(),new Date(s,a,e).getTime()}function l(e,t,a){var n=s.data.getDaysInMonth(t,a);return n>=e}var h={initDateModel:null,startDateTime:null,endDateTime:null},u={handler:null,start:function(e){u.handler=s.$watch("ngModel.datetime",function(t,a){e&&e(t,a)},!0)},stop:function(){return u.handler?(u.handler(),!0):(t.throwInvalidParamsMessage(),!1)}};s.onDaySelectChanged=function(e){if(e){var t=o(s.data.selected.day,s.data.selected.month,s.data.selected.year);i(t)}},s.onMonthSelectChanged=function(t){if(t||0===t){var a,n=s.data.selected.year,r=s.data.selected.day;l(r,t,n)||(r=s.data.getDaysInMonth(t,n)),a=o(r,t,n),e.Model.DataClass.isDateBetweenLimits(a,h.startDateTime,h.endDateTime)||e.Model.DataClass.isDateUpperStartLimit(a,h.startDateTime)&&!e.Model.DataClass.isDateLowerEndLimit(a,h.endDateTime),i(a),s.data.reloadDaysList()}},s.onYearSelectChanged=function(e){if(e||0===e){var t,a=s.data.selected.month,n=s.data.selected.day;l(n,a,e)||(n=s.data.getDaysInMonth(e,e)),t=o(n,a,e),i(t),s.data.reloadMonthList(),s.data.reloadDaysList()}},function(){h.initDateModel=n(s.ngModel),h.startDateTime=s.apdStart?+s.apdStart:null,h.endDateTime=s.apdEnd?+s.apdEnd:null,r(h.initDateModel,h.startDateTime,h.endDateTime),s.getDayOfWeekShortName=a.getDayOfWeekShortName,s.getDayOfWeekName=a.getDayOfWeekName,u.start(d)}()}}}])}(t=e.directive||(e.directive={}))}(apd||(apd={}));var apd;!function(e){var t;!function(t){"use strict";var a=function(){function t(a,s){return this._setStartDate=function(e){return this.startDate.day=new Date(e).getDate(),this.startDate.month=new Date(e).getMonth(),this.startDate.year=new Date(e).getFullYear(),this},this._setEndDate=function(e){return this.endDate.day=new Date(e).getDate(),this.endDate.month=new Date(e).getMonth(),this.endDate.year=new Date(e).getFullYear(),this},this._setNowDate=function(){return this.nowDate.day=(new Date).getDate(),this.nowDate.month=(new Date).getMonth(),this.nowDate.year=(new Date).getFullYear(),this},this instanceof t?(this.startDate={day:null,month:null,year:null},this.endDate={day:null,month:null,year:null},this.nowDate={day:null,month:null,year:null},this._setStartDate(a),this._setEndDate(s),void this._setNowDate()):(e.Model.MessagesFactoryClass.throwWrongInstanceMessage(),new t(a,s))}return t}();t.LimitDatesClass=a}(t=e.Model||(e.Model={}))}(apd||(apd={}));
//# sourceMappingURL=angular-pure-datepicker.min.js.map