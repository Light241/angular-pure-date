angular.module("angular-pd.templates",[]).run(["$templateCache",function(e){e.put("apd.html",'<div class=apd_root><select ng-model=data.selected.day ng-options="day for day in data.days" ng-init="data.selected.day = data.days[0]" ng-change=onDaySelectChanged(data.selected.day) id={{::apdDayId}} class="apd_elem apd_select_day apd_select {{::apdDayClasses}}"></select><span title={{getDayOfWeekName(data.selected.dayOfWeek)}} ng-bind=getDayOfWeekShortName(data.selected.dayOfWeek) class="apd_elem apd_day_of_week"></span><select ng-model=data.selected.month ng-options="(month + 1) for month in data.month" ng-init="data.selected.month = data.month[0]" ng-change=onMonthSelectChanged(data.selected.month) id={{::apdMonthId}} class="apd_elem apd_select_month apd_select {{::apdMonthClasses}}"></select><select ng-model=data.selected.year ng-options="year for year in data.years" ng-init="data.selected.year = data.years[0]" ng-change=onYearSelectChanged(data.selected.year) id={{::apdYearId}} class="apd_elem apd_select_year apd_select {{::apdYearClasses}}"></select></div>')}]);var apd;!function(e){var t;!function(t){"use strict";var a=function(){function a(s,n,r,i,o,d){if(this.yearsListDirection="desc",this.monthListDirection="asc",this.daysListDirection="asc",this._getSelected=function(e,a,s){var n,r=e.datetime>a,i=e.datetime===a,o=e.datetime>s,d=e.datetime===s;return n=new t.DateModelClass(r||i||o||d?e.datetime:r?r?(new Date).getTime():s:a)},this._intArraySort=function(e,t){function a(e,t){return t-e}switch(void 0===t&&(t="asc"),t){default:return e.sort(function(e,t){return e-t});case"desc":return e.sort(a)}},this._getArrayOfNumbers=function(e,t){for(var a=[],s=e;t>=s;s++)a.push(s);return a},this.reloadYearsList=function(){return this instanceof a?(this.years=this._getYearsList(this._startDateTime,this._endDateTime,this._limitDates,this.yearsListDirection),this):(e.Model.MessagesFactoryClass.throwWrongInstanceMessage(),null)},this._getYearsList=function(t,s,n,r){if(!(this instanceof a))return e.Model.MessagesFactoryClass.throwWrongInstanceMessage(),null;var i=[],o=20,d=n.startDate.year,l=n.endDate.year,h=n.nowDate.year;return t&&s&&s>t?i=this._getArrayOfNumbers(d,l):t&&s&&t>s?(e.Model.MessagesFactoryClass.throwDatesInvertedMessage(),i=this._getArrayOfNumbers(l,d)):t&&s&&t===s?i=this._getArrayOfNumbers(d,l):t&&!s?i=this._getArrayOfNumbers(d,h):!t&&s?n.endDate.year>=n.nowDate.year?i=h-o>l-o?this._getArrayOfNumbers(h,l):this._getArrayOfNumbers(l-(o-1),l):n.endDate.year>n.nowDate.year&&(i=this._getArrayOfNumbers(l-(o-1),l)):t||s||(i=this._getArrayOfNumbers(h-(o-1),h)),this._intArraySort(i,r)},this.reloadMonthList=function(){if(!(this instanceof a))return e.Model.MessagesFactoryClass.throwWrongInstanceMessage(),null;var t=new Date(this.selected.datetime).getFullYear();return this.month=this._getMonthList(this._startDateTime,this._endDateTime,this._limitDates,t,this.monthListDirection),this},this._getMonthList=function(t,s,n,r,i){if(!(this instanceof a))return e.Model.MessagesFactoryClass.throwWrongInstanceMessage(),null;var o,d=0,l=11;if(t||s){var h=t?n.startDate.year===r:!1,c=s?n.endDate.year===r:!1,u=t?n.startDate.month:d,g=s?n.endDate.month:l;o=h&&c?this._getArrayOfNumbers(u,g):h&&!c?this._getArrayOfNumbers(u,l):!h&&c?this._getArrayOfNumbers(d,g):this._getArrayOfNumbers(d,l)}else o=this._getArrayOfNumbers(d,l);return this._intArraySort(o,i)},this.reloadDaysList=function(){if(!(this instanceof a))return e.Model.MessagesFactoryClass.throwWrongInstanceMessage(),null;var t=new Date(this.selected.datetime).getFullYear(),s=new Date(this.selected.datetime).getMonth();return this.days=this._getDaysList(this._startDateTime,this._endDateTime,this._limitDates,t,s,this.daysListDirection),this},this._getDaysList=function(t,s,n,r,i,o){if(!(this instanceof a))return e.Model.MessagesFactoryClass.throwWrongInstanceMessage(),null;var d,l=1,h=a.getDaysInMonth(i,r);if(t||s){var c=t?n.startDate.year===r:!1,u=s?n.endDate.year===r:!1,g=t?n.startDate.month===i:!1,D=s?n.endDate.month===i:!1,f=c&&g,m=u&&D,y=t?n.startDate.day:l,M=s?n.endDate.day:h;d=f&&m?this._getArrayOfNumbers(y,M):f&&!m?this._getArrayOfNumbers(y,h):!f&&m?this._getArrayOfNumbers(l,M):this._getArrayOfNumbers(l,h)}else d=this._getArrayOfNumbers(l,h);return this._intArraySort(d,o)},this._getIntArr=function(t){return this instanceof a?t||0===t?t?this._getIntArr(t-1).concat(t):[]:(e.Model.MessagesFactoryClass.throwInvalidParamsMessage(),null):(e.Model.MessagesFactoryClass.throwWrongInstanceMessage(),null)},!(this instanceof a))return e.Model.MessagesFactoryClass.throwWrongClassCreationMessage(),new a(s,n,r,i,o,d);var l=this;l.selected=l._getSelected(s,n,r);var h=new Date(this.selected.datetime).getFullYear(),c=new Date(this.selected.datetime).getMonth();return l.yearsListDirection=i||l.yearsListDirection,l.monthListDirection=o||l.monthListDirection,l.daysListDirection=d||l.daysListDirection,l._limitDates=new t.LimitDatesClass(n,r),l._startDateTime=n,l._endDateTime=r,l.years=l._getYearsList(n,r,l._limitDates,l.yearsListDirection),l.month=l._getMonthList(n,r,l._limitDates,h,l.monthListDirection),l.days=l._getDaysList(n,r,l._limitDates,h,c,l.daysListDirection),this}return a.getDaysInMonth=function(e,t){return new Date(t,e+1,0).getDate()},a}();t.DataClass=a}(t=e.Model||(e.Model={}))}(apd||(apd={}));var apd;!function(e){var t;!function(t){"use strict";var a=function(){function t(a,s){return this instanceof t?(this.name=a,this["short"]=s,this):(e.Model.MessagesFactoryClass.throwWrongClassCreationMessage(),new t(a,s))}return t}();t.DayOfWeek=a}(t=e.Model||(e.Model={}))}(apd||(apd={}));var apd;!function(e){var t;!function(t){"use strict";var a=function(){function t(a){var s=this;return this.getListOfShorts=function(){if(!(s instanceof t))return e.Model.MessagesFactoryClass.throwWrongInstanceMessage(),null;for(var a=[],n=0;n<s.list.length;n++){var r=s.list[n];a.push(r["short"])}return a},this.getListOfNames=function(){if(!(s instanceof t))return e.Model.MessagesFactoryClass.throwWrongInstanceMessage(),null;for(var a=[],n=0;n<s.list.length;n++){var r=s.list[n];a.push(r.name)}return a},this.getDayOfWeekShortName=function(a){return s instanceof t?s.shorts[a]:(e.Model.MessagesFactoryClass.throwWrongInstanceMessage(),null)},this.getDayOfWeekName=function(a){return s instanceof t?s.names[a]:(e.Model.MessagesFactoryClass.throwWrongInstanceMessage(),null)},this instanceof t?(this.list=a,this.shorts=this.getListOfShorts(),this.names=this.getListOfNames(),this):(e.Model.MessagesFactoryClass.throwWrongClassCreationMessage(),new t(a))}return t}();t.DaysOfWeek=a}(t=e.Model||(e.Model={}))}(apd||(apd={}));var apd;!function(e){var t;!function(t){"use strict";var a=function(){function t(a){if(!(this instanceof t))return e.Model.MessagesFactoryClass.throwWrongClassCreationMessage(),new t(a);var s=new Date(a);return this.day=s.getDate(),this.dayOfWeek=s.getDay(),this.month=s.getMonth(),this.year=s.getFullYear(),this.datetime=a,this.timezone=s.getTimezoneOffset(),this}return t.validate=function(e){return!(!e||!e.datetime)},t}();t.DateModelClass=a}(t=e.Model||(e.Model={}))}(apd||(apd={}));var apd;!function(e){var t;!function(e){"use strict";var t=function(){function e(){this.messages={wrongClassCreation:"Class created without 'new', wrong 'this'",wrongInstance:"Wrong 'this' instance",invalidParams:"Invalid params",invalidDateModel:"Invalid date model",datesInverted:"Warning! Start date > End date"}}return e.throwDeveloperError=function(e){console.error(e)},e.throwModelValidationMessage=function(t){return this instanceof e?void this.throwDeveloperError(this.messages.invalidDateModel+': error on field "'+t+'+"'):(console.error("Wrong 'this' instance"),!1)},e.throwInvalidParamsMessage=function(){return this instanceof e?void this.throwDeveloperError(this.messages.invalidParams):(console.error("Wrong 'this' instance"),!1)},e.throwWrongClassCreationMessage=function(){return this instanceof e?void this.throwDeveloperError(this.messages.wrongClassCreation):(console.error("Wrong 'this' instance"),!1)},e.throwWrongInstanceMessage=function(){return this instanceof e?void this.throwDeveloperError(this.messages.wrongInstance):(console.error("Wrong 'this' instance"),!1)},e.throwDatesInvertedMessage=function(){return this instanceof e?void this.throwDeveloperError(this.messages.datesInverted):(console.error("Wrong 'this' instance"),!1)},e}();e.MessagesFactoryClass=t}(t=e.Model||(e.Model={}))}(apd||(apd={}));var apd;!function(e){var t;!function(t){"use strict";angular.module("angular-pd.messages",[]).factory("MessagesFactory",function(){return new e.Model.MessagesFactoryClass})}(t=e.messages||(e.messages={}))}(apd||(apd={}));var apd;!function(e){var t;!function(t){"use strict";var a=new e.Model.DaysOfWeek([new e.Model.DayOfWeek("Sunday","Sun"),new e.Model.DayOfWeek("Monday","Mon"),new e.Model.DayOfWeek("Tuesday","Tue"),new e.Model.DayOfWeek("Wednesday","Wed"),new e.Model.DayOfWeek("Thursday","Thu"),new e.Model.DayOfWeek("Friday","Fri"),new e.Model.DayOfWeek("Saturday","Sat")]);angular.module("angular-pd",["angular-pd.templates","angular-pd.messages"]).directive("pureDatepicker",["MessagesFactory",function(t){return{restrict:"E",replace:!0,templateUrl:"apd.html",scope:{ngModel:"=",apdStart:"=?",apdEnd:"=?",apdDayId:"@?",apdMonthId:"@?",apdYearId:"@?",apdDayClasses:"@?",apdMonthClasses:"@?",apdYearClasses:"@?"},link:function(s){function n(t){var a,s=e.Model.DateModelClass.validate(t);a=s?t.datetime:(new Date).getTime();var n=new Date(a),r=n.getDate(),o=n.getMonth(),d=n.getFullYear(),l=i(r,o,d);return new e.Model.DateModelClass(l)}function r(t,a,n){s.data=new e.Model.DataClass(t,a,n),s.ngModel=s.data.selected}function i(t,a,s){h(t,a,s)||(t=e.Model.DataClass.getDaysInMonth(a,s));var n=l(t,a,s);return e.Model.LimitDatesClass.isDateBetweenLimits(n,c.startDateTime,c.endDateTime)||(e.Model.LimitDatesClass.isDateUpperStartLimit(n,c.startDateTime)?e.Model.LimitDatesClass.isDateLowerEndLimit(n,c.endDateTime)||(n=c.endDateTime):n=c.startDateTime),n}function o(t){u.stop(),s.data.selected=new e.Model.DateModelClass(t),s.ngModel=s.data.selected,u.start(d)}function d(e,t){if(e!==t){var a=new Date(e),n=a.getDate(),r=a.getMonth(),d=a.getFullYear();e=i(n,r,d),o(e),s.data.reloadYearsList(),s.data.reloadMonthList(),s.data.reloadDaysList()}}function l(e,a,s){return e&&(a||0===a)&&s||t.throwInvalidParamsMessage(),new Date(s,a,e).getTime()}function h(t,a,s){var n=e.Model.DataClass.getDaysInMonth(a,s);return n>=t}var c={initDateModel:null,startDateTime:null,endDateTime:null},u={handler:null,start:function(e){u.handler=s.$watch("ngModel.datetime",function(t,a){e&&e(t,a)},!0)},stop:function(){return u.handler?(u.handler(),!0):(t.throwInvalidParamsMessage(),!1)}};s.onDaySelectChanged=function(e){if(e){var t=i(s.data.selected.day,s.data.selected.month,s.data.selected.year);o(t)}},s.onMonthSelectChanged=function(e){if(e||0===e){var t,a=s.data.selected.year,n=s.data.selected.day;t=i(n,e,a),o(t),s.data.reloadDaysList()}},s.onYearSelectChanged=function(e){if(e||0===e){var t=s.data.selected.month,a=s.data.selected.day,n=i(a,t,e);o(n),s.data.reloadMonthList(),s.data.reloadDaysList()}},function(){c.startDateTime=s.apdStart?+s.apdStart:null,c.endDateTime=s.apdEnd?+s.apdEnd:null,c.initDateModel=n(s.ngModel),r(c.initDateModel,c.startDateTime,c.endDateTime),s.getDayOfWeekShortName=a.getDayOfWeekShortName,s.getDayOfWeekName=a.getDayOfWeekName,u.start(d)}()}}}])}(t=e.directive||(e.directive={}))}(apd||(apd={}));var apd;!function(e){var t;!function(t){"use strict";var a=function(){function t(a,s){return this._setStartDate=function(a){return this instanceof t?(this.startDate.day=new Date(a).getDate(),this.startDate.month=new Date(a).getMonth(),this.startDate.year=new Date(a).getFullYear(),this.startDate.datetime=a,this):(e.Model.MessagesFactoryClass.throwWrongInstanceMessage(),!1)},this._setEndDate=function(a){return this instanceof t?(this.endDate.day=new Date(a).getDate(),this.endDate.month=new Date(a).getMonth(),this.endDate.year=new Date(a).getFullYear(),this.endDate.datetime=a,this):(e.Model.MessagesFactoryClass.throwWrongInstanceMessage(),!1)},this._setNowDate=function(){return this instanceof t?(this.nowDate.day=(new Date).getDate(),this.nowDate.month=(new Date).getMonth(),this.nowDate.year=(new Date).getFullYear(),this.nowDate.datetime=(new Date).getTime(),this):(e.Model.MessagesFactoryClass.throwWrongInstanceMessage(),!1)},this instanceof t?(this.startDate={day:null,month:null,year:null,datetime:null},this.endDate={day:null,month:null,year:null,datetime:null},this.nowDate={day:null,month:null,year:null,datetime:null},this._setStartDate(a),this._setEndDate(s),void this._setNowDate()):(e.Model.MessagesFactoryClass.throwWrongClassCreationMessage(),new t(a,s))}return t.isDateUpperStartLimit=function(e,t){return t?e>t:!0},t.isDateLowerEndLimit=function(e,t){return t?t>e:!0},t.isDateBetweenLimits=function(e,t,a){return this.isDateUpperStartLimit(e,t)&&this.isDateLowerEndLimit(e,a)},t}();t.LimitDatesClass=a}(t=e.Model||(e.Model={}))}(apd||(apd={}));
//# sourceMappingURL=angular-pure-datepicker.min.js.map