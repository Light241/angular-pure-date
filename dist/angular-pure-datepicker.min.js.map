{"version":3,"sources":["angular-pure-datepicker.js"],"names":["angular","module","run","$templateCache","put","Settings","isUtc","monthDirection","daysDirection","yearsDirection","daysList","monthList","CommonUtils","exports","isValidNumber","num","isNumber","isNaN","isNotInfinity","isFinite","getArrayOfNumbers","start","result","i","end","push","intArraySort","arr","direction","desc","a","b","sort","getIntArr","length","_getIntArr","concat","DateUtils","getVal","datetime","method","date","Date","call","getDay","prototype","getUTCDate","getDate","getDayOfWeek","getUTCDay","getYear","getUTCFullYear","getFullYear","getMonth","getUTCMonth","getDaysInMonth","month","year","isValidModel","model","isDateUpperStartLimit","dt","startLimitTime","isDateLowerEndLimit","endLimitTime","isDateBetweenLimits","LimitsModel","startDt","endDt","_setStart","d","m","y","this","_setEnd","_setNow","getTime","now","DateModel","day","dayOfWeek","timezone","getTimezoneOffset","YearsUtils","getYearsList","startDateTime","endDateTime","DEFAULT_YEARS_COUNT","startDate","endDate","nowDate","selectedYear","selected","latestPossibleYear","firstPossibleYear","yearsListDirection","MonthUtils","getMonthList","START_MONTH","END_MONTH","isYearOfLowerLimit","isYearOfUpperLimit","monthListDirection","DaysUtils","getDaysList","selectedMonth","START_DAY","lastDayInMonth","DataClass","isMonthOfLowerLimit","isMonthOfUpperLimit","isLowerLimit","isUpperLimit","daysListDirection","_getSelected","isBiggerThenStart","isEqualToStart","isLowerThenEnd","isEqualToEnd","reloadYearsList","years","_startDateTime","_endDateTime","reloadMonthList","reloadDaysList","days","angularView","directive","restrict","replace","templateUrl","scope","ngModel","apdStart","apdEnd","apdDayId","apdMonthId","apdYearId","apdDayClasses","apdMonthClasses","apdYearClasses","apdLocalization","apdIsUtc","link","getLimitSafeDatetime","settings","updateModel","ngModelWatcher","stop","data","onModelChange","oldValue","getInitDateModel","initDatetime","isInitModelValid","limitSafeDatetime","_initData","initDateModel","handler","callback","$watch","value","onDaySelectChanged","onMonthSelectChanged","onYearSelectChanged","getDayName","week","getName","getMonthName"],"mappings":"AAAAA,QAAQC,OAAO,2BAA4BC,KAAK,iBAAkB,SAASC,GAAiBA,EAAeC,IAAI,WAAW,i6BAG1H,IAAIC,WACAC,OAAO,EACPC,eAAgB,MAChBC,cAAe,MACfC,eAAgB,OAChBC,UAAW,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OACrDC,WAAY,UAAW,WAAY,QAAS,QAAS,MAAO,OAAQ,OAAQ,SAAU,YAAa,UAAW,WAAY,aAE1HC,YAAc,WACd,YAEA,IAAIC,IACAC,cAAe,SAAUC,GACrB,GAAIC,IAAYC,MAAMF,GAClBG,EAAgBC,SAASJ,EAC7B,OAAOC,IAAYE,GAEvBE,kBAAmB,SAAUC,GAGzB,IAAK,GAFDC,MAEKC,EAAIF,EAAOE,GAAKC,IAAKD,IAC1BD,EAAOG,KAAKF,EAGhB,OAAOD,IAEXI,aAAc,SAAUC,EAAKC,GACzB,QAASC,GAAKC,EAAGC,GACb,MAAOA,GAAID,EAGf,OAAQF,GACJ,QACI,MAAOD,GAAIK,KAAK,SAAUF,EAAGC,GACzB,MAAOD,GAAIC,GAEnB,KAAK,OACD,MAAOJ,GAAIK,KAAKH,KAG5BI,UAAW,SAAUC,GACjB,MAAKA,IAAqB,IAAXA,EACRA,EAASrB,EAAQsB,WAAWD,EAAS,GAAGE,OAAOF,MADtD,QAKR,OAAOrB,MAEPwB,UAAY,SAAWhC,GACvB,YAEA,SAASiC,GAAOC,EAAUC,GACtB,GAAIC,GAAO,GAAIC,MAAKH,EACpB,OAAOC,GAAOG,KAAKF,GAGvB,GAAI5B,IACA+B,OAAQ,SAAUL,GACd,GAAIC,GAAUnC,EAAc,MAAIqC,KAAKG,UAAUC,WAAaJ,KAAKG,UAAUE,OAC3E,OAAOT,GAAOC,EAAUC,IAE5BQ,aAAc,SAAUT,GACpB,GAAIC,GAAUnC,EAAc,MAAIqC,KAAKG,UAAUI,UAAYP,KAAKG,UAAUD,MAC1E,OAAON,GAAOC,EAAUC,IAE5BU,QAAS,SAAUX,GACf,GAAIC,GAAUnC,EAAc,MAAIqC,KAAKG,UAAUM,eAAiBT,KAAKG,UAAUO,WAC/E,OAAOd,GAAOC,EAAUC,IAE5Ba,SAAU,SAAUd,GAChB,GAAIC,GAAUnC,EAAc,MAAIqC,KAAKG,UAAUS,YAAcZ,KAAKG,UAAUQ,QAC5E,OAAOf,GAAOC,EAAUC,IAE5Be,eAAgB,SAAUC,EAAOC,GAC7B,MAAO,IAAIf,MAAKe,EAAMD,EAAQ,EAAG,GAAGT,WAExCW,aAAc,SAAUC,GACpB,SAASA,IAAYA,EAAMpB,UAA+B,IAAnBoB,EAAMpB,WAEjDqB,sBAAuB,SAAUC,EAAIC,GACjC,MAAKA,GACGD,EAAKC,GADe,GAGhCC,oBAAqB,SAAUF,EAAIG,GAC/B,MAAKA,GACQA,EAALH,GADkB,GAG9BI,oBAAqB,SAAUJ,EAAIC,EAAgBE,GAC/C,MAAQnD,GAAQ+C,sBAAsBC,EAAIC,IAAmBjD,EAAQkD,oBAAoBF,EAAIG,IAIrG,OAAOnD,IACRR,UACC6D,YAAc,SAAW7B,GACzB,YAEA,SAAS6B,GAAYC,EAASC,GAQ1B,QAASC,GAAUR,GAKf,MAJAhD,GAAQQ,MAAMiD,EAAIjC,EAAUO,OAAOiB,GACnChD,EAAQQ,MAAMkD,EAAIlC,EAAUgB,SAASQ,GACrChD,EAAQQ,MAAMmD,EAAInC,EAAUa,QAAQW,GACpChD,EAAQQ,MAAMwC,GAAKA,EACZY,KAGX,QAASC,GAAQb,GAKb,MAJAhD,GAAQW,IAAI8C,EAAIjC,EAAUO,OAAOiB,GACjChD,EAAQW,IAAI+C,EAAIlC,EAAUgB,SAASQ,GACnChD,EAAQW,IAAIgD,EAAInC,EAAUa,QAAQW,GAClChD,EAAQW,IAAIqC,GAAKA,EACVY,KAGX,QAASE,KACL,GAAId,IAAK,GAAInB,OAAOkC,SAKpB,OAJA/D,GAAQgE,IAAIP,EAAIjC,EAAUO,OAAOiB,GACjChD,EAAQgE,IAAIN,EAAIlC,EAAUgB,SAASQ,GACnChD,EAAQgE,IAAIL,EAAInC,EAAUa,QAAQW,GAClChD,EAAQgE,IAAIhB,GAAKA,EACVY,KA5BX,GAAI5D,IACAQ,SACAG,OACAqD,OAgCJ,OAJAR,GAAUF,GACVO,EAAQN,GACRO,IAEO9D,EAGX,MAAOqD,IACR7B,WACCyC,UAAY,SAAWzC,GACvB,YAEA,SAASyC,GAAUvC,GAQf,MAPAkC,MAAKM,IAAM1C,EAAUO,OAAOL,GAC5BkC,KAAKO,UAAY3C,EAAUW,aAAaT,GACxCkC,KAAKjB,MAAQnB,EAAUgB,SAASd,GAChCkC,KAAKhB,KAAOpB,EAAUa,QAAQX,GAC9BkC,KAAKlC,SAAWA,EAChBkC,KAAKQ,SAAW,GAAIvC,MAAKH,GAAU2C,oBAE5BT,KAGX,MAAOK,IACRzC,WACC8C,WAAa,SAAWjB,EAAa7B,EAAWzB,GAChD,YAEA,IAAIC,IACAuE,aAAc,SAAUC,EAAeC,GACnC,GAAIhE,MACAiE,EAAsB,GAEtBlE,EAAQ6C,EAAYsB,UAAU/B,KAC9BjC,EAAM0C,EAAYuB,QAAQhC,KAC1BoB,EAAMX,EAAYwB,QAAQjC,KAC1BkC,EAAetD,EAAUa,QAAQuB,KAAKmB,SAASrD,UAC/CsD,EAAsBF,EAAed,EAAOc,EAAed,EAC3DiB,EAAoCjB,EAAfc,EAAsBA,EAAed,CAgD9D,OA/CAgB,IAA2CN,EAAsB,EACjEO,GAAyCP,EAAsB,EAG1DF,GAAiBC,GAAiCA,EAAhBD,EACnC/D,EAASV,EAAYQ,kBAAkBC,EAAOG,GAIxC6D,GAAiBC,GAAiBD,EAAgBC,EACxDhE,EAASV,EAAYQ,kBAAkBI,EAAKH,GAItCgE,GAAiBC,GAAiBD,IAAkBC,EAC1DhE,EAASV,EAAYQ,kBAAkBC,EAAOG,GAIzC6D,IAAkBC,EACvBhE,EAASV,EAAYQ,kBAAkBC,EAAOwE,IAIxCR,GAAiBC,EAEnBpB,EAAYuB,QAAQhC,MAAQS,EAAYwB,QAAQjC,KAG5CnC,EADCwE,EAAoBP,EAAwB/D,EAAM+D,EAC1C3E,EAAYQ,kBAAkB0E,EAAmBtE,GAEjDZ,EAAYQ,kBAAkBI,GAAO+D,EAAsB,GAAI/D,GAKvE0C,EAAYuB,QAAQhC,KAAOS,EAAYwB,QAAQjC,OACpDnC,EAASV,EAAYQ,kBAAkBI,GAAO+D,EAAsB,GAAI/D,IAMtE6D,GAAkBC,IACxBhE,EAASV,EAAYQ,kBAAkB0E,EAAmBD,IAGvDjF,EAAYc,aAAaJ,EAAQjB,SAAS0F,qBAIzD,OAAOlF,IACRqD,YAAa7B,UAAWzB,aACvBoF,WAAa,SAAW9B,EAAa7B,EAAWzB,GAChD,YAEA,IAAIC,IACAoF,aAAc,SAAUZ,EAAeC,EAAaK,GAChD,GAAIrE,GACA4E,EAAc,EACdC,EAAY,EAGhB,IAAId,GAAiBC,EAAa,CAC9B,GAAIc,GAAqB,EAAkBlC,EAAYsB,UAAU/B,OAASkC,GAAe,EACrFU,EAAqB,EAAgBnC,EAAYuB,QAAQhC,OAASkC,GAAe,EACjFtE,EAAQ,EAAkB6C,EAAYsB,UAAUhC,MAAQ0C,EACxD1E,EAAM,EAAgB0C,EAAYuB,QAAQjC,MAAQ2C,CAIlD7E,GADA8E,GAAsBC,EACbzF,EAAYQ,kBAAkBC,EAAOG,GAGzC4E,IAAuBC,EACnBzF,EAAYQ,kBAAkBC,EAAO8E,IAGxCC,GAAsBC,EACnBzF,EAAYQ,kBAAkB8E,EAAa1E,GAI3CZ,EAAYQ,kBAAkB8E,EAAaC,OAIxD7E,GAASV,EAAYQ,kBAAkB8E,EAAaC,EAGxD,OAAOvF,GAAYc,aAAaJ,EAAQjB,SAASiG,qBAIzD,OAAOzF,IACRqD,YAAa7B,UAAWzB,aACvB2F,UAAY,SAAWrC,EAAa7B,EAAWzB,GAC/C,YAEA,IAAIC,IACA2F,YAAa,SAAUnB,EAAeC,EAAaK,EAAcc,GAC7D,GAAInF,GACAoF,EAAY,EACZC,EAAiBC,UAAUrD,eAAekD,EAAed,EAG7D,IAAIN,GAAiBC,EAAa,CAC9B,GAAIc,GAAqB,EAAkBlC,EAAYsB,UAAU/B,OAASkC,GAAe,EACrFU,EAAqB,EAAgBnC,EAAYuB,QAAQhC,OAASkC,GAAe,EACjFkB,EAAsB,EAAkB3C,EAAYsB,UAAUhC,QAAUiD,GAAgB,EACxFK,EAAsB,EAAgB5C,EAAYuB,QAAQjC,QAAUiD,GAAgB,EAEpFM,EAAgBX,GAAsBS,EACtCG,EAAgBX,GAAsBS,EAEtCzF,EAAQ,EAAkB6C,EAAYsB,UAAUT,IAAM2B,EACtDlF,EAAM,EAAgB0C,EAAYuB,QAAQV,IAAM4B,CAGhDrF,GADAyF,GAAgBC,EACPpG,EAAYQ,kBAAkBC,EAAOG,GACvCuF,IAAiBC,EACfpG,EAAYQ,kBAAkBC,EAAOsF,IACtCI,GAAgBC,EACfpG,EAAYQ,kBAAkBsF,EAAWlF,GAGzCZ,EAAYQ,kBAAkBsF,EAAWC,OAItDrF,GAASV,EAAYQ,kBAAkBsF,EAAWC,EAGtD,OAAO/F,GAAYc,aAAaJ,EAAQjB,SAAS4G,oBAIzD,OAAOpG,IACRqD,YAAa7B,UAAWzB,aACvBgG,UAAY,SAAWvE,EAAWzB,EAAauE,EAAYa,EAAYO,EAAWzB,GAqBlFoC,aAAe,SAAUtB,EAAUP,EAAeC,GAC9C,GAAIhE,GAEA6F,EAAqBvB,EAASrD,SAAW8C,EACzC+B,EAAkBxB,EAASrD,WAAa8C,EACxCgC,EAAkBzB,EAASrD,SAAW+C,EACtCgC,EAAgB1B,EAASrD,WAAa+C,CAmB1C,OAfIhE,GAAS,GAAIwD,GADZqC,GAAqBC,GAAoBC,GAAkBC,EACrC1B,EAASrD,SAG/B4E,EAIAA,GAKsB,GAAIzE,OAAOkC,UAJXU,EAJAD,IAc/BkC,gBAAkB,WAEd,MADA9C,MAAK+C,MAAQrC,EAAWC,aAAaX,KAAKgD,eAAgBhD,KAAKiD,cACxDjD,MAGXkD,gBAAkB,WACd,GAAIhC,GAAetD,EAAUa,QAAQuB,KAAKmB,SAASrD,SAEnD,OADAkC,MAAKjB,MAAQwC,EAAWC,aAAaxB,KAAKgD,eAAgBhD,KAAKiD,aAAc/B,GACtElB,MAGXmD,eAAiB,WACb,GAAIjC,GAAetD,EAAUa,QAAQuB,KAAKmB,SAASrD,UAC/CkE,EAAgBpE,EAAUgB,SAASoB,KAAKmB,SAASrD,SAErD,OADAkC,MAAKoD,KAAOtB,EAAUC,YAAY/B,KAAKgD,eAAgBhD,KAAKiD,aAAc/B,EAAcc,GACjFhC,OAGZpC,UAAWzB,YAAauE,WAAYa,WAAYO,UAAWzB,WAC1DgD,YAAc,SAAWzF,GACzB,YAGArC,SAAQC,OAAO,cACX,yBAGC8H,UAAU,iBAAkB,WACzB,OACIC,SAAU,IACVC,SAAS,EACTC,YAAa,WACbC,OACIC,QAAS,IACTC,SAAU,KACVC,OAAQ,KACRC,SAAU,KACVC,WAAY,KACZC,UAAW,KACXC,cAAe,KACfC,gBAAiB,KACjBC,eAAgB,KAChBC,gBAAiB,KACjBC,SAAU,MAEdC,KAAM,SAAUZ,GA6BZ,QAASa,GAAqBjE,EAAKvB,EAAOC,GAEtC,GAAIlB,GAAW,GAAIG,MAAKe,EAAMD,EAAOuB,GAAKH,SAU1C,OARKvC,GAAU4B,oBAAoB1B,EAAU0G,EAAS5D,cAAe4D,EAAS3D,eACrEjD,EAAUuB,sBAAsBrB,EAAU0G,EAAS5D,eAE5ChD,EAAU0B,oBAAoBxB,EAAU0G,EAAS3D,eACzD/C,EAAW0G,EAAS3D,aAFpB/C,EAAW0G,EAAS5D,eAMrB9C,EAGX,QAAS2G,GAAY3G,GACjB4G,EAAeC,OACfjB,EAAMkB,KAAKzD,SAAW,GAAId,WAAUvC,EAAU4F,EAAMW,UACpDX,EAAMC,QAAUD,EAAMkB,KAAKzD,SAC3BuD,EAAe9H,MAAMiI,GAGzB,QAASA,GAAc/G,EAAUgH,GAC7B,GAAIhH,IAAagH,EAAjB,CAIA,GAAIxE,GAAM1C,EAAUO,OAAOL,EAAU4F,EAAMW,UACvCtF,EAAQnB,EAAUgB,SAASd,EAAU4F,EAAMW,UAC3CrF,EAAOpB,EAAUa,QAAQX,EAAU4F,EAAMW,SAE7CvG,GAAWyG,EAAqBjE,EAAKvB,EAAOC,GAC5CyF,EAAY3G,GAEZ4F,EAAMkB,KAAK9B,kBACXY,EAAMkB,KAAK1B,kBACXQ,EAAMkB,KAAKzB,kBAGf,QAAS4B,GAAiB7F,GACtB,GACI8F,GADAC,EAAmBrH,EAAUqB,aAAaC,EAI1C8F,GADAC,EACe/F,EAAMpB,UAEN,GAAIG,OAAOkC,SAG9B,IAAIG,GAAM1C,EAAUO,OAAO6G,EAActB,EAAMW,UAC3CtF,EAAQnB,EAAUgB,SAASoG,EAActB,EAAMW,UAC/CrF,EAAOpB,EAAUa,QAAQuG,EAActB,EAAMW,UAE7Ca,EAAoBX,EAAqBjE,EAAKvB,EAAOC,EAEzD,OAAO,IAAIqB,WAAU6E,EAAmBxB,EAAMW,UAGlD,QAASc,GAAUC,EAAexE,EAAeC,GAC7C6C,EAAMkB,KAAO,GAAIzC,WAAUiD,EAAexE,EAAeC,EAAa6C,EAAMW,UAC5EX,EAAMC,QAAUD,EAAMkB,KAAKzD,SAvF/BuC,EAAMW,SAAWX,EAAMW,WAAY,CAInC,IAAIG,IACAY,cAAe,KACfxE,cAAe,KACfC,YAAa,MAGb6D,GACAW,QAAS,KACTzI,MAAO,SAAU0I,GACbZ,EAAeW,QAAU3B,EAAM6B,OAAO,mBAAoB,SAAUC,EAAOV,GACnEQ,GACAA,EAASE,EAAOV,KAGrB,IAEPH,KAAM,WAEF,MADAD,GAAeW,WACR,GAqEf3B,GAAM+B,mBAAqB,SAAUnF,GACjC,GAAKA,EAAL,CAEA,GAAIxC,GAAWyG,EAAqBb,EAAMkB,KAAKzD,SAASb,IAAKoD,EAAMkB,KAAKzD,SAASpC,MAAO2E,EAAMkB,KAAKzD,SAASnC,KAC5GyF,GAAY3G,KAGhB4F,EAAMgC,qBAAuB,SAAU3G,GACnC,GAAKA,GAAmB,IAAVA,EAAd,CAEA,GAAIjB,GACAkB,EAAO0E,EAAMkB,KAAKzD,SAASnC,KAC3BsB,EAAMoD,EAAMkB,KAAKzD,SAASb,GAE9BxC,GAAWyG,EAAqBjE,EAAKvB,EAAOC,GAC5CyF,EAAY3G,GAEZ4F,EAAMkB,KAAKzB,mBAGfO,EAAMiC,oBAAsB,SAAU3G,GAClC,GAAKA,GAAiB,IAATA,EAAb,CAEA,GAAID,GAAQ2E,EAAMkB,KAAKzD,SAASpC,MAC5BuB,EAAMoD,EAAMkB,KAAKzD,SAASb,IAE1BxC,EAAWyG,EAAqBjE,EAAKvB,EAAOC,EAChDyF,GAAY3G,GAEZ4F,EAAMkB,KAAK1B,kBACXQ,EAAMkB,KAAKzB,mBAGf,WACIqB,EAAS5D,cAAiB8C,EAAc,UAAKA,EAAME,SAAW,KAC9DY,EAAS3D,YAAe6C,EAAY,QAAKA,EAAMG,OAAS,KACxDW,EAASY,cAAgBL,EAAiBrB,EAAMC,SAChDwB,EAAUX,EAASY,cAAeZ,EAAS5D,cAAe4D,EAAS3D,YAEhD6C,GAAMU,iBAAmB,IAG5CV,GAAMkC,WAAaC,KAAKC,QACxBpC,EAAMqC,aAAe/G,KAAK8G,QAE1BpB,EAAe9H,MAAMiI,WAM1CjH","file":"angular-pure-datepicker.min.js","sourcesContent":["angular.module(\"angular-pd.templates\", []).run([\"$templateCache\", function($templateCache) {$templateCache.put(\"apd.html\",\"<div class=apd_root><select ng-model=data.selected.day ng-options=\\\"day for day in data.days\\\" ng-init=\\\"data.selected.day = data.days[0]\\\" ng-change=onDaySelectChanged(data.selected.day) id={{::apdDayId}} class=\\\"apd_elem apd_select_day apd_select {{::apdDayClasses}}\\\"></select><span ng-bind=getDayName(data.selected.dayOfWeek) class=\\\"apd_elem apd_day_of_week\\\"></span><select ng-model=data.selected.month ng-options=\\\"getMonthName(month) for month in data.month\\\" ng-init=\\\"data.selected.month = data.month[0]\\\" ng-change=onMonthSelectChanged(data.selected.month) id={{::apdMonthId}} class=\\\"apd_elem apd_select_month apd_select {{::apdMonthClasses}}\\\"></select><select ng-model=data.selected.year ng-options=\\\"year for year in data.years\\\" ng-init=\\\"data.selected.year = data.years[0]\\\" ng-change=onYearSelectChanged(data.selected.year) id={{::apdYearId}} class=\\\"apd_elem apd_select_year apd_select {{::apdYearClasses}}\\\"></select></div>\");}]);\n'use strict';\n\nvar Settings = {\n    isUtc: false,\n    monthDirection: 'asc',\n    daysDirection: 'asc',\n    yearsDirection: 'desc',\n    daysList: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],\n    monthList: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December']\n};\nvar CommonUtils = (function () {\n    'use strict';\n\n    var exports = {\n        isValidNumber: function (num) {\n            var isNumber = !isNaN(num);\n            var isNotInfinity = isFinite(num);\n            return isNumber && isNotInfinity;\n        },\n        getArrayOfNumbers: function (start) {\n            var result = [];\n\n            for (var i = start; i <= end; i++) {\n                result.push(i);\n            }\n\n            return result;\n        },\n        intArraySort: function (arr, direction) {\n            function desc(a, b) {\n                return b - a;\n            }\n\n            switch (direction) {\n                default:\n                    return arr.sort(function (a, b) {\n                        return a - b;\n                    });\n                case \"desc\":\n                    return arr.sort(desc);\n            }\n        },\n        getIntArr: function (length) {\n            if (!length && length !== 0) return;\n            return length ? exports._getIntArr(length - 1).concat(length) : [];\n        }\n    };\n\n    return exports;\n})();\nvar DateUtils = (function (Settings) {\n    'use strict';\n\n    function getVal(datetime, method) {\n        var date = new Date(datetime);\n        return method.call(date);\n    }\n\n    var exports = {\n        getDay: function (datetime) {\n            var method = (Settings.isUTC) ? Date.prototype.getUTCDate : Date.prototype.getDate;\n            return getVal(datetime, method);\n        },\n        getDayOfWeek: function (datetime) {\n            var method = (Settings.isUTC) ? Date.prototype.getUTCDay : Date.prototype.getDay;\n            return getVal(datetime, method);\n        },\n        getYear: function (datetime) {\n            var method = (Settings.isUTC) ? Date.prototype.getUTCFullYear : Date.prototype.getFullYear;\n            return getVal(datetime, method);\n        },\n        getMonth: function (datetime) {\n            var method = (Settings.isUTC) ? Date.prototype.getUTCMonth : Date.prototype.getMonth;\n            return getVal(datetime, method);\n        },\n        getDaysInMonth: function (month, year) {\n            return new Date(year, month + 1, 0).getDate();\n        },\n        isValidModel: function (model) {\n            return !!model && (!!model.datetime || model.datetime === 0);\n        },\n        isDateUpperStartLimit: function (dt, startLimitTime) {\n            if (!startLimitTime) return true;\n            return (dt > startLimitTime);\n        },\n        isDateLowerEndLimit: function (dt, endLimitTime) {\n            if (!endLimitTime) return true;\n            return (dt < endLimitTime);\n        },\n        isDateBetweenLimits: function (dt, startLimitTime, endLimitTime) {\n            return (exports.isDateUpperStartLimit(dt, startLimitTime) && exports.isDateLowerEndLimit(dt, endLimitTime));\n        }\n    };\n\n    return exports;\n})(Settings);\nvar LimitsModel = (function (DateUtils) {\n    'use strict';\n\n    function LimitsModel(startDt, endDt) {\n\n        var exports = {\n            start: {},\n            end: {},\n            now: {}\n        };\n\n        function _setStart(dt) {\n            exports.start.d = DateUtils.getDay(dt);\n            exports.start.m = DateUtils.getMonth(dt);\n            exports.start.y = DateUtils.getYear(dt);\n            exports.start.dt = dt;\n            return this;\n        }\n\n        function _setEnd(dt) {\n            exports.end.d = DateUtils.getDay(dt);\n            exports.end.m = DateUtils.getMonth(dt);\n            exports.end.y = DateUtils.getYear(dt);\n            exports.end.dt = dt;\n            return this;\n        }\n\n        function _setNow() {\n            var dt = new Date().getTime();\n            exports.now.d = DateUtils.getDay(dt);\n            exports.now.m = DateUtils.getMonth(dt);\n            exports.now.y = DateUtils.getYear(dt);\n            exports.now.dt = dt;\n            return this;\n        }\n\n        _setStart(startDt);\n        _setEnd(endDt);\n        _setNow();\n        \n        return exports;\n    }\n    \n    return LimitsModel;\n})(DateUtils);\nvar DateModel = (function (DateUtils) {\n    'use strict';\n\n    function DateModel(datetime) {\n        this.day = DateUtils.getDay(datetime);\n        this.dayOfWeek = DateUtils.getDayOfWeek(datetime);\n        this.month = DateUtils.getMonth(datetime);\n        this.year = DateUtils.getYear(datetime);\n        this.datetime = datetime;\n        this.timezone = new Date(datetime).getTimezoneOffset();\n\n        return this;\n    }\n\n    return DateModel;\n})(DateUtils);\nvar YearsUtils = (function (LimitsModel, DateUtils, CommonUtils) {\n    'use strict';\n\n    var exports = {\n        getYearsList: function (startDateTime, endDateTime) {\n            var result = [];\n            var DEFAULT_YEARS_COUNT = 10;\n\n            var start = LimitsModel.startDate.year;\n            var end = LimitsModel.endDate.year;\n            var now = LimitsModel.nowDate.year;\n            var selectedYear = DateUtils.getYear(this.selected.datetime);\n            var latestPossibleYear = (selectedYear > now) ? selectedYear : now;\n            var firstPossibleYear = (selectedYear < now) ? selectedYear : now;\n            latestPossibleYear = latestPossibleYear + (DEFAULT_YEARS_COUNT - 1);\n            firstPossibleYear = firstPossibleYear - (DEFAULT_YEARS_COUNT - 1);\n\n            //start = 2011, end = 2014\n            if ((startDateTime && endDateTime) && (startDateTime < endDateTime)) {\n                result = CommonUtils.getArrayOfNumbers(start, end);\n            }\n\n            //start = 2014, end = 2011\n            else if ((startDateTime && endDateTime) && (startDateTime > endDateTime)) {\n                result = CommonUtils.getArrayOfNumbers(end, start);\n            }\n\n            //start = 2011, end = 2011\n            else if ((startDateTime && endDateTime) && (startDateTime === endDateTime)) {\n                result = CommonUtils.getArrayOfNumbers(start, end);\n            }\n\n            //start = 2014, end = null\n            else if (startDateTime && !endDateTime) {\n                result = CommonUtils.getArrayOfNumbers(start, latestPossibleYear);\n            }\n\n            //start = null, end = 2014\n            else if (!startDateTime && endDateTime) {\n                //now = 2013 (or 2014),  end = 2014\n                if (LimitsModel.endDate.year >= LimitsModel.nowDate.year) {\n\n                    if ((firstPossibleYear - DEFAULT_YEARS_COUNT) > (end - DEFAULT_YEARS_COUNT)) {\n                        result = CommonUtils.getArrayOfNumbers(firstPossibleYear, end);\n                    } else {\n                        result = CommonUtils.getArrayOfNumbers(end - (DEFAULT_YEARS_COUNT - 1), end);\n                    }\n\n                }\n                //now = 2015,  end = 2014\n                else if (LimitsModel.endDate.year > LimitsModel.nowDate.year) {\n                    result = CommonUtils.getArrayOfNumbers(end - (DEFAULT_YEARS_COUNT - 1), end);\n                }\n\n            }\n\n            //start = null, end = null\n            else if (!startDateTime && !endDateTime) {\n                result = CommonUtils.getArrayOfNumbers(firstPossibleYear, latestPossibleYear);\n            }\n\n            return CommonUtils.intArraySort(result, Settings.yearsListDirection);\n        }\n    };\n\n    return exports;\n})(LimitsModel, DateUtils, CommonUtils);\nvar MonthUtils = (function (LimitsModel, DateUtils, CommonUtils) {\n    'use strict';\n\n    var exports = {\n        getMonthList: function (startDateTime, endDateTime, selectedYear) {\n            var result;\n            var START_MONTH = 0;\n            var END_MONTH = 11;\n\n            //TODO (S.Panfilov)  check\n            if (startDateTime || endDateTime) {\n                var isYearOfLowerLimit = (startDateTime) ? LimitsModel.startDate.year === selectedYear : false;\n                var isYearOfUpperLimit = (endDateTime) ? LimitsModel.endDate.year === selectedYear : false;\n                var start = (startDateTime) ? LimitsModel.startDate.month : START_MONTH;\n                var end = (endDateTime) ? LimitsModel.endDate.month : END_MONTH;\n\n                // startYear == 2015, nowYear == 2015, endYear == 2015\n                if (isYearOfLowerLimit && isYearOfUpperLimit) {\n                    result = CommonUtils.getArrayOfNumbers(start, end);\n                }\n                // startYear == 2015, nowYear == 2015, endYear == 2016 (or null)\n                else if (isYearOfLowerLimit && !isYearOfUpperLimit) {\n                    result = CommonUtils.getArrayOfNumbers(start, END_MONTH);\n                }\n                // startYear == 2014 (or null), nowYear == 2015, endYear == 2015\n                else if (!isYearOfLowerLimit && isYearOfUpperLimit) {\n                    result = CommonUtils.getArrayOfNumbers(START_MONTH, end);\n                }\n                else {\n                    // in all other cases return array of 12 month\n                    result = CommonUtils.getArrayOfNumbers(START_MONTH, END_MONTH);\n                }\n            } else {\n                // in all other cases return array of 12 month\n                result = CommonUtils.getArrayOfNumbers(START_MONTH, END_MONTH);\n            }\n\n            return CommonUtils.intArraySort(result, Settings.monthListDirection);\n        }\n    };\n\n    return exports;\n})(LimitsModel, DateUtils, CommonUtils);\nvar DaysUtils = (function (LimitsModel, DateUtils, CommonUtils) {\n    'use strict';\n\n    var exports = {\n        getDaysList: function (startDateTime, endDateTime, selectedYear, selectedMonth) {\n            var result;\n            var START_DAY = 1;\n            var lastDayInMonth = DataClass.getDaysInMonth(selectedMonth, selectedYear);\n\n            //TODO (S.Panfilov)  check\n            if (startDateTime || endDateTime) {\n                var isYearOfLowerLimit = (startDateTime) ? LimitsModel.startDate.year === selectedYear : false;\n                var isYearOfUpperLimit = (endDateTime) ? LimitsModel.endDate.year === selectedYear : false;\n                var isMonthOfLowerLimit = (startDateTime) ? LimitsModel.startDate.month === selectedMonth : false;\n                var isMonthOfUpperLimit = (endDateTime) ? LimitsModel.endDate.month === selectedMonth : false;\n\n                var isLowerLimit = (isYearOfLowerLimit && isMonthOfLowerLimit);\n                var isUpperLimit = (isYearOfUpperLimit && isMonthOfUpperLimit);\n\n                var start = (startDateTime) ? LimitsModel.startDate.day : START_DAY;\n                var end = (endDateTime) ? LimitsModel.endDate.day : lastDayInMonth;\n\n                if (isLowerLimit && isUpperLimit) {\n                    result = CommonUtils.getArrayOfNumbers(start, end);\n                } else if (isLowerLimit && !isUpperLimit) {\n                    result = CommonUtils.getArrayOfNumbers(start, lastDayInMonth);\n                } else if (!isLowerLimit && isUpperLimit) {\n                    result = CommonUtils.getArrayOfNumbers(START_DAY, end);\n                } else {\n                    // in all other cases return array of 12 month\n                    result = CommonUtils.getArrayOfNumbers(START_DAY, lastDayInMonth);\n                }\n            } else {\n                // in all other cases return array of 12 month\n                result = CommonUtils.getArrayOfNumbers(START_DAY, lastDayInMonth);\n            }\n\n            return CommonUtils.intArraySort(result, Settings.daysListDirection);\n        }\n    };\n\n    return exports;\n})(LimitsModel, DateUtils, CommonUtils);\nvar DataClass = (function (DateUtils, CommonUtils, YearsUtils, MonthUtils, DaysUtils, DateModel) {\n\n    function DataClass(selected, startDateTime, endDateTime) {\n        selected.datetime = CommonUtils.isValidNumber(selected.datetime) ? selected.datetime : null;\n        startDateTime = CommonUtils.isValidNumber(startDateTime) ? startDateTime : null;\n        endDateTime = CommonUtils.isValidNumber(endDateTime) ? endDateTime : null;\n\n        this.selected = this._getSelected(selected, startDateTime, endDateTime);\n        var selectedYear = DateUtils.getYear(this.selected.datetime);\n        var selectedMonth = DateUtils.getMonth(this.selected.datetime);\n\n        this._limitDates = new LimitsModel(startDateTime, endDateTime);\n        this._startDateTime = startDateTime;\n        this._endDateTime = endDateTime;\n        this.years = YearsUtils.getYearsList(startDateTime, endDateTime);\n        this.month = MonthUtils.getMonthList(startDateTime, endDateTime, selectedYear);\n        this.days = DaysUtils.getDaysList(startDateTime, endDateTime, selectedYear, selectedMonth);\n\n        return this;\n    }\n\n    _getSelected = function (selected, startDateTime, endDateTime) {\n        var result;\n\n        var isBiggerThenStart = (selected.datetime > startDateTime);\n        var isEqualToStart = (selected.datetime === startDateTime);\n        var isLowerThenEnd = (selected.datetime > endDateTime);\n        var isEqualToEnd = (selected.datetime === endDateTime);\n\n        //start == 1; selected == 1 or 2 or 3; end == 3;\n        if ((isBiggerThenStart || isEqualToStart) || (isLowerThenEnd || isEqualToEnd)) {\n            result = new DateModel(selected.datetime);\n        } else\n        //start == 1; selected == 0\n        if (!isBiggerThenStart) {\n            result = new DateModel(startDateTime);\n        } else\n        //selected == 4; end == 3;\n        if (!isBiggerThenStart) {\n            result = new DateModel(endDateTime);\n        }\n        //paranoid case\n        else {\n            result = new DateModel(new Date().getTime());\n        }\n\n        return result;\n    };\n\n    reloadYearsList = function () {\n        this.years = YearsUtils.getYearsList(this._startDateTime, this._endDateTime);\n        return this;\n    };\n\n    reloadMonthList = function () {\n        var selectedYear = DateUtils.getYear(this.selected.datetime);\n        this.month = MonthUtils.getMonthList(this._startDateTime, this._endDateTime, selectedYear);\n        return this;\n    };\n\n    reloadDaysList = function () {\n        var selectedYear = DateUtils.getYear(this.selected.datetime);\n        var selectedMonth = DateUtils.getMonth(this.selected.datetime);\n        this.days = DaysUtils.getDaysList(this._startDateTime, this._endDateTime, selectedYear, selectedMonth);\n        return this;\n    };\n\n})(DateUtils, CommonUtils, YearsUtils, MonthUtils, DaysUtils, DateModel);\nvar angularView = (function (DateUtils) {\n    'use strict';\n\n\n    angular.module('angular-pd', [\n        'angular-pd.templates'\n    ])\n\n        .directive('pureDatepicker', function () {\n            return {\n                restrict: 'E',\n                replace: true,\n                templateUrl: 'apd.html',\n                scope: {\n                    ngModel: '=',\n                    apdStart: '=?',\n                    apdEnd: '=?',\n                    apdDayId: '@?',\n                    apdMonthId: '@?',\n                    apdYearId: '@?',\n                    apdDayClasses: '@?',\n                    apdMonthClasses: '@?',\n                    apdYearClasses: '@?',\n                    apdLocalization: '=?',\n                    apdIsUtc: '=?'\n                },\n                link: function (scope) {\n\n                    scope.apdIsUtc = scope.apdIsUtc || false;\n\n                    //TODO (S.Panfilov) check for cross-browser support\n                    //TODO (S.Panfilov) may be should add tests\n                    var settings = {\n                        initDateModel: null,\n                        startDateTime: null,\n                        endDateTime: null\n                    };\n\n                    var ngModelWatcher = {\n                        handler: null,\n                        start: function (callback) {\n                            ngModelWatcher.handler = scope.$watch('ngModel.datetime', function (value, oldValue) {\n                                if (callback) {\n                                    callback(value, oldValue)\n                                }\n\n                            }, true);\n                        },\n                        stop: function () {\n                            ngModelWatcher.handler();\n                            return true;\n                        }\n                    };\n\n\n                    function getLimitSafeDatetime(day, month, year) {\n\n                        var datetime = new Date(year, month, day).getTime();\n\n                        if (!DateUtils.isDateBetweenLimits(datetime, settings.startDateTime, settings.endDateTime)) {\n                            if (!DateUtils.isDateUpperStartLimit(datetime, settings.startDateTime)) {\n                                datetime = settings.startDateTime;\n                            } else if (!DateUtils.isDateLowerEndLimit(datetime, settings.endDateTime)) {\n                                datetime = settings.endDateTime;\n                            }\n                        }\n\n                        return datetime;\n                    }\n\n                    function updateModel(datetime) {\n                        ngModelWatcher.stop();\n                        scope.data.selected = new DateModel(datetime, scope.apdIsUtc);\n                        scope.ngModel = scope.data.selected;\n                        ngModelWatcher.start(onModelChange);\n                    }\n\n                    function onModelChange(datetime, oldValue) {\n                        if (datetime === oldValue) {\n                            return;\n                        }\n\n                        var day = DateUtils.getDay(datetime, scope.apdIsUtc);\n                        var month = DateUtils.getMonth(datetime, scope.apdIsUtc);\n                        var year = DateUtils.getYear(datetime, scope.apdIsUtc);\n\n                        datetime = getLimitSafeDatetime(day, month, year);\n                        updateModel(datetime);\n\n                        scope.data.reloadYearsList();\n                        scope.data.reloadMonthList();\n                        scope.data.reloadDaysList();\n                    }\n\n                    function getInitDateModel(model) {\n                        var isInitModelValid = DateUtils.isValidModel(model);\n                        var initDatetime;\n\n                        if (isInitModelValid) {\n                            initDatetime = model.datetime\n                        } else {\n                            initDatetime = new Date().getTime();\n                        }\n\n                        var day = DateUtils.getDay(initDatetime, scope.apdIsUtc);\n                        var month = DateUtils.getMonth(initDatetime, scope.apdIsUtc);\n                        var year = DateUtils.getYear(initDatetime, scope.apdIsUtc);\n\n                        var limitSafeDatetime = getLimitSafeDatetime(day, month, year);\n\n                        return new DateModel(limitSafeDatetime, scope.apdIsUtc);\n                    }\n\n                    function _initData(initDateModel, startDateTime, endDateTime) {\n                        scope.data = new DataClass(initDateModel, startDateTime, endDateTime, scope.apdIsUtc);\n                        scope.ngModel = scope.data.selected;\n                    }\n\n\n                    scope.onDaySelectChanged = function (day) {\n                        if (!day) return;\n\n                        var datetime = getLimitSafeDatetime(scope.data.selected.day, scope.data.selected.month, scope.data.selected.year);\n                        updateModel(datetime);\n                    };\n\n                    scope.onMonthSelectChanged = function (month) {\n                        if (!month && month !== 0) return;\n\n                        var datetime;\n                        var year = scope.data.selected.year;\n                        var day = scope.data.selected.day;\n\n                        datetime = getLimitSafeDatetime(day, month, year);\n                        updateModel(datetime);\n\n                        scope.data.reloadDaysList();\n                    };\n\n                    scope.onYearSelectChanged = function (year) {\n                        if (!year && year !== 0) return;\n\n                        var month = scope.data.selected.month;\n                        var day = scope.data.selected.day;\n\n                        var datetime = getLimitSafeDatetime(day, month, year);\n                        updateModel(datetime);\n\n                        scope.data.reloadMonthList();\n                        scope.data.reloadDaysList();\n                    };\n\n                    (function _init() {\n                        settings.startDateTime = (scope.apdStart) ? +scope.apdStart : null;\n                        settings.endDateTime = (scope.apdEnd) ? +scope.apdEnd : null;\n                        settings.initDateModel = getInitDateModel(scope.ngModel);\n                        _initData(settings.initDateModel, settings.startDateTime, settings.endDateTime);\n\n                        var localization = scope.apdLocalization || null;\n                        //var week = new DaysClass(localization);\n                        //var year = new MonthClass(localization);\n                        scope.getDayName = week.getName;\n                        scope.getMonthName = year.getName;\n\n                        ngModelWatcher.start(onModelChange);\n                    })();\n\n                }\n            }\n        });\n})(DateUtils);"],"sourceRoot":"/source/"}